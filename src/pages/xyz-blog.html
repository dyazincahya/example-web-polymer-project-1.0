<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<!--$blogID='2556722185382757751';
$requestURL="http://www.blogger.com/feeds/{$blogID}/posts/default";-->
<dom-module id="xyz-blog">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                padding: 10px;
            }

            .alt{
                padding-left: 16px;
            }

            h1 a{
                color: #333;
                font-size: 18px;
                text-decoration: none;
            }
        </style>
        <div class="alt">
            <h1><iron-icon icon="icons:bookmark-border"></iron-icon> Latest post</h1>
        </div>
        <template is="dom-repeat" items="[[dataEntry]]">
            <div class="card">
                <h1><a href="[[item.url]]">[[item.title]]</a></h1>
                <p><iron-icon icon="icons:alarm"></iron-icon> [[item.published]]</p>
            </div>
        </template>
    </template>

    <script>
        // $(document).ready(function() {
            // console.log(storeGuys);
            /*var storeGuys = function(xml) {
                
                $(xml).find('entry').each(function(i, e){
                    // console.log(e);
                    var title = $(e).find('title').text();
                    var urlPost = $(e).find('link').filter(function( index ) { return 4; })[4].href;
                    
                });
            };*/
        // });

        Polymer({
            is: 'xyz-blog',
            properties: {
                dataEntry: {
                    type: Array,
                    value: [
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' },
                        { "title" : '', "url"   : '', "published" : '' }
                    ]
                },
            },
            ready : function(){
                var me = this;
                $.ajax({
                    type: "GET",
                    url: "https://www.blogger.com/feeds/2556722185382757751/posts/default",
                    dataType: "jsonp",
                    success: function(xml) {
                        $(xml).find('entry').each(function(i, e){
                            var title = $(e).find('title').text();
                            var urlPost = $(e).find('link').filter(function( index ) { return 4; })[4].href;
                            var published = $(e).find('published').text();
                            
                            me.set('dataEntry.'+i+'.title', title);
                            me.set('dataEntry.'+i+'.url', urlPost);
                            me.set('dataEntry.'+i+'.published', published);
                        });
                    }
                });
                console.log(this.dataEntry);
            }
        });
    </script>
</dom-module>
